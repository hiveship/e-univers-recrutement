<h1>Editing user</h1>

<%= form_for(@user, url: admin_user_path(@user), method: "patch")  do |f| %>
    <% if @user.errors.any? %>
        <div id="error_explanation">
            <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

            <ul>
                <% @user.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                <% end %>
            </ul>
        </div>
    <% end %>

    <div class="field">
        <%= f.label :login %><br>
        <%= f.text_field :login %>
    </div>
    <div class="field">
        <%= f.label :mail %><br>
        <%= f.text_field :mail %>
    </div>

    <% if @user.status == User::RECRUTEUR %>
        <td>
            <i class="icon-eye-open"></i>
            <%= link_to("Nommer Administrateur", set_admin_admin_user_path(@user), method: :post) %>
        </td>

        <td>
            <i class="icon-eye-open"></i>
            <%= link_to("Nommer Manager", set_manager_admin_user_path(@user), method: :post) %>
        </td>

    <% elsif @user.status == User::MANAGER %>
        <td>
            <i class="icon-eye-close"></i>
            <%= link_to("Nommer recruteur", set_recruteur_admin_user_path(@user), method: :post) %>
        </td>

        <td>
            <i class="icon-eye-close"></i>
            <%= link_to("Nommer Administrateur", set_admin_admin_user_path(@user), method: :post) %>
        </td>
    <% else %>
        <td>
            <i class="icon-eye-close"></i>
            <%= link_to("Nommer recruteur", set_recruteur_admin_user_path(@user), method: :post) %>
        </td>

        <td>
            <i class="icon-eye-open"></i>
            <%= link_to("Nommer Manager", set_manager_admin_user_path(@user), method: :post) %>
        </td>

    <% end %>

    <div class="actions">
        <%= f.submit %>
    </div>
<% end %>

<%= link_to 'Liste des comptes', admin_users_path %>
